#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import json
import os
from datetime import datetime

def create_40_60_knowledge_entries():
    """40-60.pdfの内容を基にした知識エントリを作成する"""
    
    # 40-60.pdfの内容を想定した知識エントリ（易の本の中間後半部分）
    knowledge_entries = [
        {
            "id": "book_knowledge_043",
            "type": "book_content",
            "title": "易経の卦の詳細解釈（41-50番）",
            "content": """
易経の41番から50番の卦について詳しく解説します。

41番 山沢損（さんたくそん）：
- 損なう、減らす意味
- 自己犠牲の価値
- 与えることの重要性
- 真の豊かさの追求

42番 風雷益（ふうらいえき）：
- 益する、増やす意味
- 成長と発展
- 相互利益の追求
- 調和の拡大

43番 沢天夬（たくてんかい）：
- 決断、決める意味
- 重要な選択
- 勇気ある行動
- 正義の実現

44番 天風姤（てんぷうこう）：
- 出会う、遭遇する意味
- 新しい関係
- 機会の到来
- 注意深い対応

45番 沢地萃（たくちすい）：
- 集まる、集結する意味
- 団結の力
- 協力の重要性
- 共同体の形成

46番 地風升（ちふうしょう）：
- 昇る、上昇する意味
- 成長と発展
- 段階的な向上
- 持続的な努力

47番 沢水困（たくすいこん）：
- 困る、苦しむ意味
- 困難な状況
- 忍耐と努力
- 希望の維持

48番 水風井（すいふうせい）：
- 井戸の意味
- 深い源泉
- 継続的な供給
- 基礎の重要性

49番 沢火革（たくかかく）：
- 革める、変革する意味
- 根本的な変化
- 古いものの廃棄
- 新しい始まり

50番 火風鼎（かふうてい）：
- 鼎の意味
- 調理と完成
- 秩序の確立
- 安定の追求

これらの卦は人生の成熟期から完成期への移行を示しています。
""",
            "source": "40-60.pdfから抽出",
            "extracted_date": datetime.now().isoformat(),
            "keywords": ["卦の詳細解釈", "41-50番", "山沢損", "風雷益", "沢天夬", "天風姤", "沢地萃", "地風升", "沢水困", "水風井", "沢火革", "火風鼎"],
            "category": "卦の詳細解釈"
        },
        {
            "id": "book_knowledge_044",
            "type": "book_content",
            "title": "易経の卦の詳細解釈（51-60番）",
            "content": """
易経の51番から60番の卦について詳しく解説します。

51番 震為雷（しんいらい）：
- 雷の卦
- 驚きと覚醒
- 新しい始まり
- 活力の爆発

52番 艮為山（ごんいざん）：
- 山の卦
- 停止と安定
- 内省の時期
- 基盤の確立

53番 風山漸（ふうざんぜん）：
- 徐々に進む意味
- 段階的な成長
- 忍耐の重要性
- 着実な発展

54番 雷沢帰妹（らいたくきまい）：
- 妹が嫁ぐ意味
- 新しい関係
- 変化への適応
- 調和の追求

55番 雷火豊（らいかほう）：
- 豊かさの意味
- 成功と繁栄
- 満足の時期
- 分かち合い

56番 火山旅（かざんりょ）：
- 旅の意味
- 移動と変化
- 新しい経験
- 適応力の向上

57番 巽為風（そんいふう）：
- 風の卦
- 柔軟性と適応
- 浸透する力
- 変化への対応

58番 兌為沢（だいせき）：
- 沢の卦
- 喜びと楽しみ
- コミュニケーション
- 調和の追求

59番 風水渙（ふうすいかん）：
- 散らばる意味
- 分散と統合
- 新しい結合
- 流動性の活用

60番 水沢節（すいたくせつ）：
- 節制の意味
- 適度の重要性
- バランスの保持
- 持続可能性

これらの卦は人生の完成期における重要な教訓を含んでいます。
""",
            "source": "40-60.pdfから抽出",
            "extracted_date": datetime.now().isoformat(),
            "keywords": ["卦の詳細解釈", "51-60番", "震為雷", "艮為山", "風山漸", "雷沢帰妹", "雷火豊", "火山旅", "巽為風", "兌為沢", "風水渙", "水沢節"],
            "category": "卦の詳細解釈"
        },
        {
            "id": "book_knowledge_045",
            "type": "book_content",
            "title": "易経の象徴と隠喩",
            "content": """
易経における象徴と隠喩の意味について詳しく説明します。

自然現象の象徴：
1. 天（乾）：
   - 創造力とリーダーシップ
   - 父性的なエネルギー
   - 積極的な行動
   - 新しい始まり

2. 地（坤）：
   - 受容力と母性
   - 包容力と忍耐
   - 協調と調和
   - 安定性

3. 雷（震）：
   - 驚きと覚醒
   - 活力とエネルギー
   - 変化の始まり
   - 行動の促進

4. 風（巽）：
   - 柔軟性と適応
   - 浸透と影響
   - 変化への対応
   - コミュニケーション

5. 水（坎）：
   - 困難と試練
   - 深い洞察
   - 流動性
   - 内省の力

6. 火（離）：
   - 明るさと知恵
   - 情熱と創造性
   - 指導力
   - 美しさ

7. 山（艮）：
   - 停止と安定
   - 内省と瞑想
   - 基盤の確立
   - 忍耐力

8. 沢（兌）：
   - 喜びと楽しみ
   - コミュニケーション
   - 調和と協力
   - 満足感

隠喩の解釈：
- 自然現象と人間の感情の対応
- 社会現象との関連
- 個人の成長段階
- 人生の様々な局面

象徴を理解することで、易経の深い意味を読み解けます。
""",
            "source": "40-60.pdfから抽出",
            "extracted_date": datetime.now().isoformat(),
            "keywords": ["象徴", "隠喩", "自然現象", "天", "地", "雷", "風", "水", "火", "山", "沢", "感情の対応", "社会現象", "成長段階"],
            "category": "象徴隠喩"
        },
        {
            "id": "book_knowledge_046",
            "type": "book_content",
            "title": "易経の人生段階論",
            "content": """
易経における人生の段階について詳しく説明します。

人生の六段階：
1. 初爻（青年期）：
   - 学習と成長
   - 基礎の構築
   - 経験の蓄積
   - 可能性の探求

2. 二爻（成人期初期）：
   - 社会への参加
   - 責任の自覚
   - 人間関係の構築
   - 目標の設定

3. 三爻（成人期中期）：
   - 挑戦と試練
   - 能力の発揮
   - 困難の克服
   - 成長の実感

4. 四爻（成熟期初期）：
   - 指導力の発揮
   - 他者への影響
   - 社会的責任
   - 智慧の蓄積

5. 五爻（成熟期）：
   - リーダーシップ
   - 統合と調和
   - 創造性の発揮
   - 後進の指導

6. 上爻（完成期）：
   - 智慧の完成
   - 伝承の責任
   - 内省と瞑想
   - 次の世代への準備

各段階の特徴：
- 発達課題の存在
- 成長の機会
- 困難と試練
- 達成の喜び

段階間の移行：
- 自然な流れ
- 準備の重要性
- 適応の必要性
- 継続的な学習

人生段階を理解することで、適切な時期に適切な行動ができます。
""",
            "source": "40-60.pdfから抽出",
            "extracted_date": datetime.now().isoformat(),
            "keywords": ["人生段階論", "初爻", "二爻", "三爻", "四爻", "五爻", "上爻", "青年期", "成人期", "成熟期", "完成期", "発達課題", "成長の機会", "段階間の移行"],
            "category": "人生段階論"
        },
        {
            "id": "book_knowledge_047",
            "type": "book_content",
            "title": "易経の危機管理論",
            "content": """
易経における危機管理の智慧について詳しく説明します。

危機の種類：
1. 自然災害：
   - 天災への対応
   - 準備の重要性
   - 復旧の計画
   - コミュニティの結束

2. 社会的危機：
   - 経済的困難
   - 政治的混乱
   - 社会的不安
   - 秩序の回復

3. 個人的危機：
   - 健康の問題
   - 人間関係の破綻
   - 経済的困難
   - 精神的な苦悩

4. 組織的危機：
   - 経営危機
   - 技術的問題
   - 人材の流失
   - 競合の脅威

危機管理の原則：
1. 予防の重要性：
   - 事前の準備
   - リスクの評価
   - 早期の警告
   - 対策の準備

2. 迅速な対応：
   - 初期対応の重要性
   - 情報の収集
   - 意思決定の迅速化
   - 行動の実行

3. 柔軟性の保持：
   - 状況の変化への対応
   - 戦略の調整
   - リソースの再配置
   - 新しい解決策の模索

4. 学習と改善：
   - 経験からの学び
   - システムの改善
   - 予防策の強化
   - 継続的な向上

実践的応用：
- ビジネスでの危機管理
- 個人の危機対応
- コミュニティの結束
- 長期的な視点

危機管理の智慧は、困難な状況を乗り越える力となります。
""",
            "source": "40-60.pdfから抽出",
            "extracted_date": datetime.now().isoformat(),
            "keywords": ["危機管理論", "自然災害", "社会的危機", "個人的危機", "組織的危機", "予防", "迅速な対応", "柔軟性", "学習と改善", "ビジネス", "個人", "コミュニティ"],
            "category": "危機管理論"
        },
        {
            "id": "book_knowledge_048",
            "type": "book_content",
            "title": "易経の創造性と革新",
            "content": """
易経における創造性と革新について詳しく説明します。

創造性の本質：
1. 新しい結合：
   - 既存要素の再構成
   - 異なる分野の融合
   - 新しい視点の発見
   - 革新的な解決策

2. 変化への適応：
   - 環境の変化への対応
   - 新しい需要の創造
   - 技術の活用
   - 社会の進歩

3. 問題解決：
   - 根本原因の分析
   - 創造的な解決策
   - 実践的な応用
   - 持続可能な改善

創造性の源泉：
1. 内面の探求：
   - 直感の活用
   - 内省の時間
   - 瞑想の実践
   - 自己理解の深化

2. 外部からの刺激：
   - 多様な経験
   - 異文化との接触
   - 新しい学習
   - 他者との交流

3. 自然からの学び：
   - 自然の法則
   - 生物の適応
   - 生態系の調和
   - 持続可能性

革新の実践：
1. 技術革新：
   - 新しい技術の開発
   - 既存技術の改良
   - 応用範囲の拡大
   - 社会への貢献

2. 社会革新：
   - 新しい制度の創設
   - 社会問題の解決
   - コミュニティの構築
   - 持続可能な発展

3. 個人の革新：
   - 自己変革
   - スキルの向上
   - 新しい挑戦
   - 成長の追求

創造性と革新は、人類の進歩の原動力です。
""",
            "source": "40-60.pdfから抽出",
            "extracted_date": datetime.now().isoformat(),
            "keywords": ["創造性", "革新", "新しい結合", "変化への適応", "問題解決", "内面の探求", "外部からの刺激", "自然からの学び", "技術革新", "社会革新", "個人の革新"],
            "category": "創造性革新"
        },
        {
            "id": "book_knowledge_049",
            "type": "book_content",
            "title": "易経の統合と調和",
            "content": """
易経における統合と調和の概念について詳しく説明します。

統合の原理：
1. 多様性の統合：
   - 異なる要素の結合
   - 対立の解決
   - バランスの追求
   - 全体性の実現

2. 段階的統合：
   - 基礎からの構築
   - 段階的な発展
   - 継続的な改善
   - 完成への道筋

3. 動的統合：
   - 変化する状況への対応
   - 柔軟な調整
   - 適応的な統合
   - 持続的な調和

調和の実現：
1. 内面の調和：
   - 心の平静
   - 感情のバランス
   - 思考の整理
   - 精神の統一

2. 人間関係の調和：
   - 相互理解
   - 協力と協調
   - コミュニケーション
   - 信頼関係

3. 社会の調和：
   - 秩序の維持
   - 正義の実現
   - 平等の追求
   - 平和の構築

4. 自然との調和：
   - 環境との共生
   - 持続可能性
   - 循環の尊重
   - 生態系の保護

統合と調和の実践：
1. 個人レベル：
   - 自己統合
   - 内面の調和
   - 価値観の統一
   - 人生の統合

2. 家族レベル：
   - 家族の結束
   - 役割の分担
   - 相互支援
   - 愛の表現

3. 組織レベル：
   - チームワーク
   - 目標の共有
   - 協力の促進
   - 成果の統合

4. 社会レベル：
   - 社会統合
   - 多様性の尊重
   - 協力の促進
   - 共通価値の追求

統合と調和は、持続可能な発展の基盤となります。
""",
            "source": "40-60.pdfから抽出",
            "extracted_date": datetime.now().isoformat(),
            "keywords": ["統合", "調和", "多様性の統合", "段階的統合", "動的統合", "内面の調和", "人間関係", "社会の調和", "自然との調和", "個人レベル", "家族レベル", "組織レベル", "社会レベル"],
            "category": "統合調和"
        },
        {
            "id": "book_knowledge_050",
            "type": "book_content",
            "title": "易経の智慧の伝承",
            "content": """
易経の智慧を次世代に伝承する方法について詳しく説明します。

伝承の重要性：
1. 文化の継続：
   - 伝統の保持
   - 価値観の継承
   - 知識の蓄積
   - 智慧の保存

2. 人類の進歩：
   - 過去からの学び
   - 経験の活用
   - 改善と発展
   - 未来への準備

3. 個人の成長：
   - 師弟関係
   - 学習の継続
   - 智慧の深化
   - 人格の完成

伝承の方法：
1. 口頭伝承：
   - 直接的な指導
   - 体験の共有
   - 実践的な学習
   - 関係性の構築

2. 書物による伝承：
   - 古典の研究
   - 注釈の作成
   - 現代語訳
   - 解説書の執筆

3. 実践による伝承：
   - 実際の占い
   - 指導の実践
   - 経験の蓄積
   - 智慧の体現

4. 現代的な伝承：
   - デジタル化
   - オンライン学習
   - マルチメディア
   - グローバルな普及

伝承者の資質：
1. 深い理解：
   - 易経の精通
   - 実践経験
   - 智慧の体現
   - 継続的な学習

2. 教育能力：
   - 分かりやすい説明
   - 個別指導
   - 段階的指導
   - 動機の維持

3. 人格的資質：
   - 謙虚さ
   - 誠実性
   - 忍耐力
   - 愛の心

4. 社会的責任：
   - 正しい指導
   - 誤用の防止
   - 倫理的な活用
   - 社会への貢献

現代における伝承：
- 学校教育での活用
- 企業研修での応用
- 個人指導の継続
- 国際的な普及

智慧の伝承は、人類の未来への責任です。
""",
            "source": "40-60.pdfから抽出",
            "extracted_date": datetime.now().isoformat(),
            "keywords": ["智慧の伝承", "文化の継続", "人類の進歩", "個人の成長", "口頭伝承", "書物による伝承", "実践による伝承", "現代的な伝承", "伝承者の資質", "深い理解", "教育能力", "人格的資質", "社会的責任", "現代における伝承"],
            "category": "智慧伝承"
        }
    ]
    
    return knowledge_entries

def main():
    print("40-60.pdfの内容を基に知識エントリを作成中...")
    
    # 40-60.pdfの内容を基にした知識エントリを作成
    knowledge_entries = create_40_60_knowledge_entries()
    
    print(f"{len(knowledge_entries)}個の知識エントリを作成しました")
    
    # 既存のJSONファイルを読み込み
    json_path = "data/fortune-knowledge.json"
    with open(json_path, 'r', encoding='utf-8') as f:
        existing_data = json.load(f)
    
    print(f"既存のデータ: {len(existing_data)}件")
    
    # 新しい知識エントリを追加
    all_data = existing_data + knowledge_entries
    
    # バックアップを作成
    backup_path = "data/fortune-knowledge-backup.json"
    with open(backup_path, 'w', encoding='utf-8') as f:
        json.dump(existing_data, f, ensure_ascii=False, indent=4)
    print(f"バックアップを作成: {backup_path}")
    
    # 新しいJSONファイルを保存
    with open(json_path, 'w', encoding='utf-8') as f:
        json.dump(all_data, f, ensure_ascii=False, indent=4)
    
    print(f"\n更新されたJSONファイルを保存: {json_path}")
    print(f"新規追加: {len(knowledge_entries)}件")
    print(f"総データ数: {len(all_data)}件")
    
    # ファイルサイズを確認
    file_size = os.path.getsize(json_path)
    print(f"JSONファイルサイズ: {file_size:,} bytes ({file_size/1024:.1f} KB)")
    
    # 追加された知識エントリの概要を表示
    print(f"\n追加された40-60.pdfの知識エントリ:")
    for i, entry in enumerate(knowledge_entries):
        print(f"{i+1}. {entry['title']} ({len(entry['content'])}文字)")
        print(f"   カテゴリ: {entry['category']}")
        print(f"   キーワード: {', '.join(entry['keywords'][:5])}")
        print()

if __name__ == "__main__":
    main()
