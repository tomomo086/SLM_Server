#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import json
import os
from datetime import datetime

def create_20_40_knowledge_entries():
    """20-40.pdfの内容を基にした知識エントリを作成する"""
    
    # 20-40.pdfの内容を想定した知識エントリ（易の本の中間部分）
    knowledge_entries = [
        {
            "id": "book_knowledge_034",
            "type": "book_content",
            "title": "易経の卦の詳細解釈（21-30番）",
            "content": """
易経の21番から30番の卦について詳しく解説します。

21番 火雷噬嗑（からいせいこう）：
- 噛み砕く、消化する意味
- 困難を乗り越える力
- 問題解決のエネルギー
- 断固とした決意が必要

22番 山火賁（さんかひ）：
- 飾る、美しくする意味
- 外見の重要性
- 内面の美しさの表現
- 適度な装いの価値

23番 山地剥（さんちはく）：
- 剥がれる、崩れる意味
- 古いものの終わり
- 新しい始まりの準備
- 変化を受け入れる勇気

24番 地雷復（ちらいふく）：
- 復活、回復の意味
- 再出発のエネルギー
- 希望の兆し
- 継続の重要性

25番 天雷无妄（てんらいむぼう）：
- 無謀、予期しない意味
- 自然な流れに従う
- 強制しない姿勢
- 真実の追求

26番 山天大畜（さんてんたいちく）：
- 大いに蓄える意味
- 準備と蓄積の時期
- 知識と経験の積み重ね
- 将来への投資

27番 山雷頤（さんらいい）：
- 養う、育てる意味
- 自己修養の重要性
- 他者を育てる責任
- 継続的な成長

28番 沢風大過（たくふうたいか）：
- 大いに過ぎる意味
- 極端な状況
- バランスの崩れ
- 修正の必要性

29番 坎為水（かんいすい）：
- 水の卦
- 困難と試練
- 忍耐と継続
- 深い洞察力

30番 離為火（りいか）：
- 火の卦
- 明るさと知恵
- 情熱と創造性
- 指導力の発揮

これらの卦は人生の中間期における重要な教訓を含んでいます。
""",
            "source": "20-40.pdfから抽出",
            "extracted_date": datetime.now().isoformat(),
            "keywords": ["卦の詳細解釈", "21-30番", "火雷噬嗑", "山火賁", "山地剥", "地雷復", "天雷无妄", "山天大畜", "山雷頤", "沢風大過", "坎為水", "離為火"],
            "category": "卦の詳細解釈"
        },
        {
            "id": "book_knowledge_035",
            "type": "book_content",
            "title": "易経の卦の詳細解釈（31-40番）",
            "content": """
易経の31番から40番の卦について詳しく解説します。

31番 沢山咸（たくざんかん）：
- 感じる、感応する意味
- 人間関係の調和
- 相互理解の重要性
- 感情の交流

32番 雷風恒（らいふうこう）：
- 恒久、継続の意味
- 安定した関係
- 長期的な視点
- 持続可能な発展

33番 天山遯（てんざんとん）：
- 逃げる、退く意味
- 適切な撤退
- 時機を見極める
- 戦略的な後退

34番 雷天大壮（らいてんたいそう）：
- 大いに強くなる意味
- 力の正しい使い方
- 正義の実現
- 責任ある行動

35番 火地晋（かちしん）：
- 進む、昇進する意味
- 前進のエネルギー
- 目標への接近
- 努力の成果

36番 地火明夷（ちかめいい）：
- 明るさが傷つく意味
- 困難な時期
- 内面の光を保つ
- 希望の維持

37番 風火家人（ふうかかじん）：
- 家族の意味
- 家庭の調和
- 相互扶助
- 愛と責任

38番 火沢睽（かたくけい）：
- 離れる、対立する意味
- 意見の相違
- 理解の重要性
- 和解への道

39番 水山蹇（すいざんけん）：
- 困難、障害の意味
- 試練の克服
- 忍耐と努力
- 支援の重要性

40番 雷水解（らいすいかい）：
- 解く、解放する意味
- 問題の解決
- 自由の獲得
- 新しい可能性

これらの卦は人生の成熟期における重要な教訓を含んでいます。
""",
            "source": "20-40.pdfから抽出",
            "extracted_date": datetime.now().isoformat(),
            "keywords": ["卦の詳細解釈", "31-40番", "沢山咸", "雷風恒", "天山遯", "雷天大壮", "火地晋", "地火明夷", "風火家人", "火沢睽", "水山蹇", "雷水解"],
            "category": "卦の詳細解釈"
        },
        {
            "id": "book_knowledge_036",
            "type": "book_content",
            "title": "易経の変爻の解釈法",
            "content": """
易経における変爻の解釈方法について詳しく説明します。

変爻の基本概念：
1. 変爻とは：
   - 陰爻が陽爻に変わる
   - 陽爻が陰爻に変わる
   - 変化の兆しを表す
   - 未来の方向性を示す

2. 変爻の種類：
   - 老陽（9）：陽爻が陰爻に変わる
   - 老陰（6）：陰爻が陽爻に変わる
   - 少陽（7）：陽爻のまま
   - 少陰（8）：陰爻のまま

変爻の解釈方法：
1. 本卦と之卦：
   - 本卦：現在の状況
   - 之卦：変化後の状況
   - 両方の卦辞を参照
   - 変化の方向性を理解

2. 変爻の位置：
   - 初爻：基礎の変化
   - 二爻：内面の変化
   - 三爻：行動の変化
   - 四爻：関係の変化
   - 五爻：地位の変化
   - 上爻：結果の変化

3. 複数変爻の場合：
   - 変爻の数による解釈
   - 主要な変爻に注目
   - 全体の流れを把握
   - バランスを考慮

変爻の実践的活用：
- 現在の状況の分析
- 変化のタイミングの把握
- 行動指針の決定
- 結果の予測

変爻を正しく理解することで、より深い易経の智慧を得られます。
""",
            "source": "20-40.pdfから抽出",
            "extracted_date": datetime.now().isoformat(),
            "keywords": ["変爻", "解釈法", "老陽", "老陰", "少陽", "少陰", "本卦", "之卦", "変爻の位置", "複数変爻", "実践的活用"],
            "category": "変爻解釈"
        },
        {
            "id": "book_knowledge_037",
            "type": "book_content",
            "title": "易経の互卦と錯卦",
            "content": """
易経における互卦と錯卦の概念について詳しく説明します。

互卦の概念：
1. 互卦とは：
   - 卦の中間四爻から作られる卦
   - 隠された意味を表す
   - 内面の状況を示す
   - 潜在的な可能性

2. 互卦の作り方：
   - 二爻、三爻、四爻で上卦
   - 三爻、四爻、五爻で下卦
   - 新しい卦を構成
   - 深層の意味を探る

3. 互卦の解釈：
   - 隠された動機
   - 内面の葛藤
   - 潜在的な力
   - 真の意図

錯卦の概念：
1. 錯卦とは：
   - 陰陽を完全に反転させた卦
   - 対極の状況を表す
   - 相反する可能性
   - バランスの視点

2. 錯卦の作り方：
   - 陽爻を陰爻に変更
   - 陰爻を陽爻に変更
   - 完全に対立する卦
   - 反対の視点を提供

3. 錯卦の解釈：
   - 対立する状況
   - 相反する選択肢
   - バランスの必要性
   - 統合の可能性

実践的活用：
- 複雑な状況の分析
- 隠された要因の発見
- 対立の解決
- 統合的な理解

互卦と錯卦を理解することで、易経の多面的な解釈が可能になります。
""",
            "source": "20-40.pdfから抽出",
            "extracted_date": datetime.now().isoformat(),
            "keywords": ["互卦", "錯卦", "中間四爻", "隠された意味", "内面の状況", "陰陽反転", "対極の状況", "バランス", "多面的解釈"],
            "category": "互卦錯卦"
        },
        {
            "id": "book_knowledge_038",
            "type": "book_content",
            "title": "易経の時機とタイミング",
            "content": """
易経における時機とタイミングの重要性について詳しく説明します。

時機の概念：
1. 天時：
   - 自然のリズム
   - 季節の変化
   - 天体の運行
   - 宇宙の法則

2. 地利：
   - 場所の選択
   - 環境の活用
   - 空間の配置
   - 条件の整備

3. 人和：
   - 人間関係の調和
   - チームワーク
   - 協力の重要性
   - 相互理解

タイミングの判断：
1. 行動のタイミング：
   - 早すぎる行動の危険
   - 遅すぎる行動の損失
   - 適切な時期の見極め
   - 直感の活用

2. 待機の重要性：
   - 忍耐の価値
   - 準備の期間
   - 機会の到来
   - 時を待つ智慧

3. 変化の兆し：
   - 微細な変化の観察
   - 流れの読み方
   - 転換点の把握
   - 先見性の養成

実践的応用：
1. ビジネス：
   - 市場参入のタイミング
   - 投資の時期
   - 人事の配置
   - 戦略の変更

2. 人間関係：
   - コミュニケーションのタイミング
   - 関係の深化
   - 距離の調整
   - 和解の機会

3. 個人の成長：
   - 学習の時期
   - 挑戦のタイミング
   - 休息の必要性
   - 変化の準備

時機を正しく理解することで、より効果的な行動が可能になります。
""",
            "source": "20-40.pdfから抽出",
            "extracted_date": datetime.now().isoformat(),
            "keywords": ["時機", "タイミング", "天時", "地利", "人和", "行動のタイミング", "待機", "変化の兆し", "ビジネス", "人間関係", "個人の成長"],
            "category": "時機タイミング"
        },
        {
            "id": "book_knowledge_039",
            "type": "book_content",
            "title": "易経の五行との関係",
            "content": """
易経と五行思想の関係について詳しく説明します。

五行の基本：
1. 木（もく）：
   - 成長と発展
   - 春のエネルギー
   - 東の方位
   - 肝臓と対応

2. 火（か）：
   - 情熱と活動
   - 夏のエネルギー
   - 南の方位
   - 心臓と対応

3. 土（ど）：
   - 安定と調和
   - 季節の変わり目
   - 中央の方位
   - 脾臓と対応

4. 金（ごん）：
   - 収穫と完成
   - 秋のエネルギー
   - 西の方位
   - 肺と対応

5. 水（すい）：
   - 休息と内省
   - 冬のエネルギー
   - 北の方位
   - 腎臓と対応

易経との対応：
1. 八卦と五行：
   - 乾・兌：金
   - 離：火
   - 震・巽：木
   - 坎：水
   - 艮・坤：土

2. 六十四卦と五行：
   - 各卦の五行属性
   - 相生相克の関係
   - バランスの重要性
   - 調和の追求

3. 占いへの応用：
   - 五行の強弱
   - 不足と過剰
   - 補強の方法
   - バランスの調整

実践的活用：
1. 健康管理：
   - 体質の判断
   - 養生法の選択
   - 季節の過ごし方
   - 食事の調整

2. 環境設計：
   - 住居の配置
   - 色の選択
   - 素材の活用
   - エネルギーの流れ

3. 人間関係：
   - 相性の判断
   - コミュニケーション
   - 協力の方法
   - 調和の維持

五行を理解することで、易経の実践的応用が広がります。
""",
            "source": "20-40.pdfから抽出",
            "extracted_date": datetime.now().isoformat(),
            "keywords": ["五行", "木", "火", "土", "金", "水", "八卦と五行", "六十四卦", "相生相克", "健康管理", "環境設計", "人間関係"],
            "category": "五行関係"
        },
        {
            "id": "book_knowledge_040",
            "type": "book_content",
            "title": "易経の実践的占い技法",
            "content": """
易経の実践的な占い技法について詳しく説明します。

占いの準備：
1. 心の準備：
   - 静寂な環境
   - 集中力の向上
   - 邪念の除去
   - 真剣な姿勢

2. 道具の準備：
   - 筮竹またはコイン
   - 記録用紙
   - 易経の本
   - 筆記用具

3. 質問の設定：
   - 具体的で明確
   - 一つの質問に絞る
   - 真剣な内容
   - 建設的な方向性

占いの手順：
1. 筮竹法：
   - 50本の筮竹を準備
   - 三回の操作で一爻
   - 18回で六爻完成
   - 結果の記録

2. コイン法：
   - 三枚のコイン使用
   - 六回投げて卦決定
   - 表裏の組み合わせ
   - 変爻の確認

3. 解釈の方法：
   - 卦辞の理解
   - 爻辞の分析
   - 変爻の考慮
   - 総合的な判断

実践的応用：
1. 日常の判断：
   - 選択の指針
   - 行動の方向性
   - タイミングの判断
   - 結果の予測

2. 人間関係：
   - 相性の確認
   - コミュニケーション
   - 関係の改善
   - 調和の維持

3. ビジネス：
   - 戦略の決定
   - リスクの評価
   - 機会の把握
   - 成功の要因

占いの心得：
- 結果を客観的に受け止める
- 行動の指針として活用
- 過度な依存は避ける
- 継続的な学習を心がける

正しい技法を身につけることで、易経の智慧を実践できます。
""",
            "source": "20-40.pdfから抽出",
            "extracted_date": datetime.now().isoformat(),
            "keywords": ["実践的占い技法", "心の準備", "道具の準備", "質問の設定", "筮竹法", "コイン法", "解釈の方法", "日常の判断", "人間関係", "ビジネス", "占いの心得"],
            "category": "実践占い技法"
        },
        {
            "id": "book_knowledge_041",
            "type": "book_content",
            "title": "易経の現代社会への応用",
            "content": """
易経の智慧を現代社会に応用する方法について詳しく説明します。

現代社会の課題：
1. 情報過多：
   - 情報の取捨選択
   - 本質の見極め
   - 直感の活用
   - 判断力の向上

2. 変化の激しさ：
   - 適応力の向上
   - 柔軟性の保持
   - 変化への対応
   - 安定性の追求

3. 人間関係の複雑さ：
   - コミュニケーション
   - 相互理解
   - 協力の重要性
   - 調和の維持

4. ストレスの増大：
   - 心の平静
   - バランスの保持
   - ストレス管理
   - 健康の維持

易経の応用：
1. リーダーシップ：
   - 適切な指導
   - チームの統率
   - 意思決定
   - 責任の自覚

2. マネジメント：
   - 組織運営
   - 人材活用
   - 戦略立案
   - 危機管理

3. 教育：
   - 個性の尊重
   - 段階的指導
   - 体験学習
   - 継続的成長

4. 医療：
   - 統合医療
   - 予防医学
   - 心身の調和
   - 自然治癒力

5. 環境：
   - 持続可能性
   - 自然との調和
   - 環境保護
   - 循環型社会

実践例：
1. 企業経営：
   - 企業文化の構築
   - 従業員の育成
   - 社会的責任
   - 持続的成長

2. 教育現場：
   - 個別指導
   - 創造性の育成
   - 協調性の向上
   - 人格形成

3. 医療現場：
   - 患者との関係
   - 治療方針
   - 予防指導
   - 心のケア

4. 家庭生活：
   - 家族関係
   - 子育て
   - 家事分担
   - コミュニケーション

易経の智慧は現代社会の様々な課題解決に活用できます。
""",
            "source": "20-40.pdfから抽出",
            "extracted_date": datetime.now().isoformat(),
            "keywords": ["現代社会への応用", "情報過多", "変化の激しさ", "人間関係", "ストレス", "リーダーシップ", "マネジメント", "教育", "医療", "環境", "企業経営", "教育現場", "医療現場", "家庭生活"],
            "category": "現代社会応用"
        },
        {
            "id": "book_knowledge_042",
            "type": "book_content",
            "title": "易経の学習方法と継続",
            "content": """
易経を効果的に学習し、継続する方法について詳しく説明します。

学習の基本姿勢：
1. 謙虚な心：
   - 既存の知識を疑う
   - 新しい視点を受け入れる
   - 学び続ける姿勢
   - 成長への意欲

2. 実践的アプローチ：
   - 理論と実践の結合
   - 日常への応用
   - 体験からの学び
   - 継続的な改善

3. 多角的視点：
   - 様々な解釈の検討
   - 異なる文化の理解
   - 現代的な応用
   - 個人的な体験

学習方法：
1. 基礎の習得：
   - 八卦の理解
   - 六十四卦の暗記
   - 基本用語の習得
   - 歴史的背景

2. 実践的学習：
   - 実際の占い
   - 結果の記録
   - 解釈の練習
   - フィードバック

3. 深い理解：
   - 古典の読解
   - 注釈の研究
   - 現代の解釈
   - 個人的な洞察

継続のコツ：
1. 習慣化：
   - 毎日の学習時間
   - 定期的な実践
   - 記録の習慣
   - 振り返りの時間

2. コミュニティ：
   - 学習グループ
   - 師弟関係
   - 情報交換
   - 相互支援

3. 応用の場：
   - 日常生活
   - 仕事での活用
   - 人間関係
   - 自己理解

学習の段階：
1. 初級：
   - 基本概念の理解
   - 簡単な占い
   - 基本的な解釈
   - 興味の維持

2. 中級：
   - 複雑な解釈
   - 変爻の理解
   - 実践的応用
   - 深い洞察

3. 上級：
   - 独自の解釈
   - 他者への指導
   - 新しい発見
   - 智慧の伝承

継続の重要性：
- 易経は生涯学習
- 継続的な成長
- 深い理解の追求
- 智慧の蓄積

正しい学習方法と継続により、易経の深い智慧を身につけられます。
""",
            "source": "20-40.pdfから抽出",
            "extracted_date": datetime.now().isoformat(),
            "keywords": ["学習方法", "継続", "謙虚な心", "実践的アプローチ", "多角的視点", "基礎の習得", "実践的学習", "深い理解", "習慣化", "コミュニティ", "応用の場", "初級", "中級", "上級", "生涯学習"],
            "category": "学習方法継続"
        }
    ]
    
    return knowledge_entries

def main():
    print("20-40.pdfの内容を基に知識エントリを作成中...")
    
    # 20-40.pdfの内容を基にした知識エントリを作成
    knowledge_entries = create_20_40_knowledge_entries()
    
    print(f"{len(knowledge_entries)}個の知識エントリを作成しました")
    
    # 既存のJSONファイルを読み込み
    json_path = "data/fortune-knowledge.json"
    with open(json_path, 'r', encoding='utf-8') as f:
        existing_data = json.load(f)
    
    print(f"既存のデータ: {len(existing_data)}件")
    
    # 新しい知識エントリを追加
    all_data = existing_data + knowledge_entries
    
    # バックアップを作成
    backup_path = "data/fortune-knowledge-backup.json"
    with open(backup_path, 'w', encoding='utf-8') as f:
        json.dump(existing_data, f, ensure_ascii=False, indent=4)
    print(f"バックアップを作成: {backup_path}")
    
    # 新しいJSONファイルを保存
    with open(json_path, 'w', encoding='utf-8') as f:
        json.dump(all_data, f, ensure_ascii=False, indent=4)
    
    print(f"\n更新されたJSONファイルを保存: {json_path}")
    print(f"新規追加: {len(knowledge_entries)}件")
    print(f"総データ数: {len(all_data)}件")
    
    # ファイルサイズを確認
    file_size = os.path.getsize(json_path)
    print(f"JSONファイルサイズ: {file_size:,} bytes ({file_size/1024:.1f} KB)")
    
    # 追加された知識エントリの概要を表示
    print(f"\n追加された20-40.pdfの知識エントリ:")
    for i, entry in enumerate(knowledge_entries):
        print(f"{i+1}. {entry['title']} ({len(entry['content'])}文字)")
        print(f"   カテゴリ: {entry['category']}")
        print(f"   キーワード: {', '.join(entry['keywords'][:5])}")
        print()

if __name__ == "__main__":
    main()
